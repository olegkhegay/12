import{_ as B,c as r,o as i,a as o,s as g,n as b,g as h,x as k,t as d,y as U,z as j,j as p,A as D,B as y,C as P,k as I,l as M}from"./CvDpfZ_4.js";import{g as T,S as F}from"./CKx49QUS.js";T.registerPlugin(F);const O={name:"FeedbackForm",setup(){const w=p(null),s=p(null),c=p(null),e=p(null),_=D(()=>typeof window<"u"&&document.documentElement.getAttribute("data-theme")||"white"),x=D(()=>_.value==="white"?"/bg_Feedback-white.png":"/bg_Feedback-dark.png"),a=y({name:"",email:"",phone:"",message:""}),n=y({name:"",email:"",phone:"",message:""}),v=y({name:!1,email:!1,phone:!1,message:!1}),S=p(!1),l=y({success:!1,message:""}),z=()=>{let t=!0;!a.name||a.name.trim().length<2?(n.name="Имя должно содержать не менее 2 символов",u("name"),t=!1):n.name="";const m=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;!a.email||!m.test(a.email)?(n.email="Пожалуйста, введите корректный email",u("email"),t=!1):n.email="";const f=/^(\+998|998|8)?[\s\-]?(\d{2}|\(\d{2}\))[\s\-]?\d{3}[\s\-]?\d{2}[\s\-]?\d{2}$|^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;return!a.phone||!f.test(a.phone)?(n.phone="Пожалуйста, введите корректный номер телефона",u("phone"),t=!1):n.phone="",!a.message||a.message.trim().length<10?(n.message="Сообщение должно содержать не менее 10 символов",u("message"),t=!1):n.message="",t},u=t=>{v[t]=!0,setTimeout(()=>{v[t]=!1},2e3)},C=t=>{n[t]="",v[t]=!1},V=async()=>{if(z()){S.value=!0,l.success=!1,l.message="";try{const m=await(await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();!m.success&&m.errors?Object.keys(m.errors).forEach(f=>{n[f]=m.errors[f],u(f)}):m.success&&(a.name="",a.email="",a.phone="",a.message="",l.success=!0,l.message=m.message,c.value&&T.fromTo(".success-message",{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power2.out"}),setTimeout(()=>{l.message="",l.success=!1},5e3))}catch(t){console.error("Ошибка при отправке формы:",t),l.success=!1,l.message="Произошла ошибка при отправке формы. Пожалуйста, попробуйте позже."}finally{S.value=!1}}},E=()=>{if(!s.value||!c.value||!e.value)return;T.timeline({scrollTrigger:{trigger:w.value,start:"top 80%",end:"bottom 20%",toggleActions:"play none none none"}}).from(s.value,{y:50,opacity:0,duration:.8,ease:"power2.out"}).from(c.value.querySelectorAll(".form-group"),{y:30,opacity:0,stagger:.2,duration:.5,ease:"power2.out"},"-=0.4").from(c.value.querySelector("button"),{y:0,opacity:0,duration:.5,ease:"power2.out",clearProps:"transform"},"-=0.2").from(e.value,{x:50,opacity:0,duration:.8,ease:"power2.out"},"-=0.6")};P(_,()=>{typeof window<"u"&&(F.getAll().forEach(t=>t.kill()),setTimeout(()=>{E()},300))}),I(()=>{setTimeout(()=>{E()},500),window.addEventListener("resize",A)});const A=()=>{F.getAll().forEach(t=>t.kill()),setTimeout(()=>{E()},300)};return M(()=>{window.removeEventListener("resize",A),F.getAll().forEach(t=>t.kill())}),{feedbackSection:w,feedbackText:s,feedbackForm:c,consultationCard:e,formData:a,errors:n,animationFields:v,isSubmitting:S,formStatus:l,submitForm:V,clearError:C,backgroundImage:x}}},R={class:"feedback-section",ref:"feedbackSection"},Z={class:"feedback-bg"},q=["src"],L={class:"feedback-container"},N={class:"feedback-left"},J={class:"feedback-text",ref:"feedbackText"},W={class:"feedback-form",ref:"feedbackForm"},G={key:0,class:"error-message"},H={key:0,class:"error-message"},K={key:0,class:"error-message"},Q={key:0,class:"error-message"},X=["disabled"],Y={key:0},$={key:1,class:"spinner"},ee={key:0,class:"form-status"},se={key:0,class:"success-message"},ae={key:1,class:"error-message-global"},oe={class:"feedback-right"},te={class:"consultation-card",ref:"consultationCard"};function ne(w,s,c,e,_,x){return i(),r("section",R,[o("div",Z,[o("img",{src:e.backgroundImage,alt:"Фоновый узор"},null,8,q)]),o("div",L,[o("div",N,[o("div",J,s[9]||(s[9]=[o("h2",null,"Оставить обратную связь",-1),o("p",null,"Остались вопросы или есть предложения? Напишите нам – мы всегда на связи!",-1)]),512),o("div",W,[o("div",{class:b(["form-group",{error:e.errors.name,"pulse-animation":e.animationFields.name}])},[s[10]||(s[10]=o("label",{for:"name"},"Имя",-1)),h(o("input",{type:"text",id:"name",placeholder:"Ваше имя...","onUpdate:modelValue":s[0]||(s[0]=a=>e.formData.name=a),onFocus:s[1]||(s[1]=a=>e.clearError("name"))},null,544),[[k,e.formData.name]]),e.errors.name?(i(),r("span",G,d(e.errors.name),1)):g("",!0)],2),o("div",{class:b(["form-group",{error:e.errors.email,"pulse-animation":e.animationFields.email}])},[s[11]||(s[11]=o("label",{for:"email"},"Email",-1)),h(o("input",{type:"email",id:"email",placeholder:"user.name@email.com","onUpdate:modelValue":s[2]||(s[2]=a=>e.formData.email=a),onFocus:s[3]||(s[3]=a=>e.clearError("email"))},null,544),[[k,e.formData.email]]),e.errors.email?(i(),r("span",H,d(e.errors.email),1)):g("",!0)],2),o("div",{class:b(["form-group",{error:e.errors.phone,"pulse-animation":e.animationFields.phone}])},[s[12]||(s[12]=o("label",{for:"phone"},"Телефон",-1)),h(o("input",{type:"tel",id:"phone",placeholder:"+998 90 111 22 33","onUpdate:modelValue":s[4]||(s[4]=a=>e.formData.phone=a),onFocus:s[5]||(s[5]=a=>e.clearError("phone"))},null,544),[[k,e.formData.phone]]),e.errors.phone?(i(),r("span",K,d(e.errors.phone),1)):g("",!0)],2),o("div",{class:b(["form-group",{error:e.errors.message,"pulse-animation":e.animationFields.message}])},[s[13]||(s[13]=o("label",{for:"message"},"Сообщение",-1)),h(o("textarea",{id:"message",placeholder:"Пожалуйста, введите ваше сообщение здесь... (необязательно)","onUpdate:modelValue":s[6]||(s[6]=a=>e.formData.message=a),onFocus:s[7]||(s[7]=a=>e.clearError("message"))},null,544),[[k,e.formData.message]]),e.errors.message?(i(),r("span",Q,d(e.errors.message),1)):g("",!0)],2),o("button",{class:"feedback-submit",onClick:s[8]||(s[8]=U((...a)=>e.submitForm&&e.submitForm(...a),["prevent"])),disabled:e.isSubmitting},[e.isSubmitting?(i(),r("span",$)):(i(),r("span",Y,"Отправить сообщение"))],8,X),e.formStatus.message?(i(),r("div",ee,[e.formStatus.success?(i(),r("div",se,d(e.formStatus.message),1)):(i(),r("div",ae,d(e.formStatus.message),1))])):g("",!0)],512)]),o("div",oe,[o("div",te,s[14]||(s[14]=[j('<h3 data-v-c554ba21>Консультация по проекту</h3><p data-v-c554ba21>Чтобы узнать больше о наших услугах, заполните заявку или позвоните нам. Мы расскажем вам, как мы можем помочь вашему бизнесу.</p><div class="consultation-info" data-v-c554ba21><div class="consultation-item" data-v-c554ba21><span class="consultation-label" data-v-c554ba21>Телефон:</span><span class="consultation-value" data-v-c554ba21>+998 (90) 123-45-67</span></div><div class="consultation-item" data-v-c554ba21><span class="consultation-label" data-v-c554ba21>Email:</span><span class="consultation-value" data-v-c554ba21>info@gmail.ru</span></div><div class="consultation-item" data-v-c554ba21><span class="consultation-label" data-v-c554ba21>Адрес:</span><span class="consultation-value" data-v-c554ba21>Узбекистан, г. Ташкент, ул. Богишамол, 232.</span></div></div>',3)]),512)])])],512)}const le=B(O,[["render",ne],["__scopeId","data-v-c554ba21"]]);export{le as F};
